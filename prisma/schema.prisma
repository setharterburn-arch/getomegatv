generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model User {
  id               String   @id @default(cuid())
  email            String   @unique
  password         String?
  name             String?
  createdAt        DateTime @default(now())
  updatedAt        DateTime @updatedAt
  
  squareCustomerId String?

  subscription     Subscription?
}

model Plan {
  id          String   @id @default(cuid())
  name        String
  description String
  price       Float
  interval    String   // "MONTHLY", "YEARLY"
  
  // Square Catalog Object ID if needed
  squareId    String?

  subscriptions Subscription[]
}

model Subscription {
  id        String   @id @default(cuid())
  userId    String   @unique
  user      User     @relation(fields: [userId], references: [id])
  
  planId    String
  plan      Plan     @relation(fields: [planId], references: [id])
  
  status    String   // "ACTIVE", "CANCELED", "PAST_DUE"
  startDate DateTime @default(now())
  endDate   DateTime?
  autoRenew Boolean  @default(true)
}
